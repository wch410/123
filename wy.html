<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人自用数据备份脚本 - 交互式指南</title>
    <meta name="description" content="一个强大的 Bash 脚本，用于自动化和手动备份数据到云存储（支持 S3 兼容服务和 WebDAV），提供详细的 Telegram 消息通知和云端备份保留策略。">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f0fdf4;
            color: #14532d;
        }
        .nav-link {
            transition: all 0.3s ease;
            position: relative;
        }
        .nav-link:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #22c55e;
            transition: width 0.3s ease;
        }
        .nav-link.active, .nav-link:hover {
            color: #22c55e;
        }
        .nav-link.active:after, .nav-link:hover:after {
            width: 100%;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
        }
        .accordion-button.open + .accordion-content {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .code-block {
            position: relative;
        }
        .copy-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #166534;
            color: #dcfce7;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .copy-button:hover {
            background-color: #15803d;
        }
        .copy-button.copied {
            background-color: #22c55e;
            color: white;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4">
            <ul class="flex justify-center space-x-6 md:space-x-10 text-base md:text-lg font-medium text-green-800">
                <li><a href="#home" class="nav-link active">主页</a></li>
                <li><a href="#install" class="nav-link">安装与设置</a></li>
                <li><a href="#usage" class="nav-link">使用方法</a></li>
                <li><a href="#faq" class="nav-link">常见问题</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-16">
        
        <section id="home" class="content-section active">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-green-900 mb-4">个人自用数据备份脚本</h1>
                <p class="text-lg md:text-xl text-green-700 max-w-3xl mx-auto">一个强大的 Bash 脚本，用于自动化和手动备份数据到云存储，提供友好的命令行菜单，并支持详细的 Telegram 通知和云端备份保留策略，让数据备份变得简单可靠。</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">⏱️</span>
                        <h3 class="text-xl font-bold text-green-900">智能自动备份</h3>
                    </div>
                    <p class="text-green-800">只需设置一次备份间隔天数，配合 Cron Job，脚本即可智能判断并自动执行备份，无需手动干预。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">🚀</span>
                        <h3 class="text-xl font-bold text-green-900">一键手动备份</h3>
                    </div>
                    <p class="text-green-800">需要立即备份？通过菜单选择“手动备份”，即可随时触发一次完整的备份上传流程。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">☁️</span>
                        <h3 class="text-xl font-bold text-green-900">多云存储支持</h3>
                    </div>
                    <p class="text-green-800">全面支持 S3 兼容存储（如 Cloudflare R2）和通用的 WebDAV 协议，让您的数据备份更灵活。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">🔔</span>
                        <h3 class="text-xl font-bold text-green-900">Telegram 消息通知</h3>
                    </div>
                    <p class="text-green-800">备份过程、成功或失败，以及保留策略执行结果，都会通过 Telegram 机器人实时通知。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">🗑️</span>
                        <h3 class="text-xl font-bold text-green-900">智能备份保留策略</h3>
                    </div>
                    <p class="text-green-800">支持按数量或按天数自动清理云端旧备份，有效管理存储空间，避免占用过多资源。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">🖥️</span>
                        <h3 class="text-xl font-bold text-green-900">友好的命令行界面</h3>
                    </div>
                    <p class="text-green-800">清晰的菜单结构和详细的提示信息，即使是命令行新手也能轻松上手，告别复杂命令。</p>
                </div>
            </div>
        </section>

        <section id="install" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-900 mb-3">安装与设置</h2>
                <p class="text-lg text-green-700">请按照以下步骤将脚本安装到您的系统并进行初步设置。</p>
            </div>
            <div class="max-w-4xl mx-auto space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <h3 class="text-xl font-bold text-green-900 mb-3">第一步：保存脚本文件</h3>
                    <p class="text-green-800 mb-4">在您的终端中，创建一个名为 `personal_backup.sh` 的文件。例如，将其保存在您的主目录 (`~`) 下：</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="nano ~/personal_backup.sh">复制</button>
                        <p>nano ~/personal_backup.sh</p>
                    </div>
                    <p class="text-green-800 mt-4">将 GitHub 仓库中 `personal_backup.sh` 的最新脚本代码完整复制并粘贴到 `nano` 编辑器中。保存并退出 `nano`：按下 `Ctrl + X`，输入 `Y`，然后按 `Enter`。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <h3 class="text-xl font-bold text-green-900 mb-3">第二步：给予脚本执行权限</h3>
                    <p class="text-green-800 mb-4">在终端中执行以下命令，使脚本可运行：</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="chmod +x ~/personal_backup.sh">复制</button>
                        <p>chmod +x ~/personal_backup.sh</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <h3 class="text-xl font-bold text-green-900 mb-3">第三步：设置快捷启动 (可选，但推荐)</h3>
                    <p class="text-green-800 mb-4">为了方便每次输入 `bf` 即可运行脚本，请在您常用的 Shell 配置文件（如 `~/.bashrc` 或 `~/.zshrc`）中添加一个别名：</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="nano ~/.bashrc  # 或 nano ~/.zshrc">复制</button>
                        <p>nano ~/.bashrc  # 或 nano ~/.zshrc</p>
                    </div>
                    <p class="text-green-800 mt-4 mb-4">滚动到文件底部，添加以下行：</p>
                     <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="alias bf='bash ~/personal_backup.sh'">复制</button>
                        <p>alias bf='bash ~/personal_backup.sh'</p>
                    </div>
                    <p class="text-green-800 mt-4">**注意**：如果 `personal_backup.sh` 文件不在您的主目录，请替换为其实际的完整路径。保存并退出 (`Ctrl + X`, `Y`, `Enter`)。使配置立即生效：</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="source ~/.bashrc  # 或 source ~/.zshrc">复制</button>
                        <p>source ~/.bashrc  # 或 source ~/.zshrc</p>
                    </div>
                    <p class="text-green-800 mt-4">或者，直接关闭并重新打开终端。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <h3 class="text-xl font-bold text-green-900 mb-3">第四步：安装脚本依赖</h3>
                    <p class="text-green-800 mb-4">首次运行脚本时，它会检测并提示您安装缺失的依赖项。请根据您的操作系统选择相应的命令进行安装。</p>
                    <p class="font-semibold text-green-800 mb-2">Debian/Ubuntu 系统:</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm mb-4">
                        <button class="copy-button" data-clipboard-text="sudo apt update && sudo apt install zip awscli curl -y">复制</button>
                        <p>sudo apt update && sudo apt install zip awscli curl -y</p>
                    </div>
                    <p class="font-semibold text-green-800 mb-2">CentOS/RHEL 系统:</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="sudo yum install zip awscli curl -y">复制</button>
                        <p>sudo yum install zip awscli curl -y</p>
                    </div>
                    <p class="text-green-800 mt-4">在执行安装命令时，系统可能会要求输入 `root` 密码。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-green-200/50">
                    <h3 class="text-xl font-bold text-green-900 mb-3">第五步：设置 Cron Job (实现自动备份)</h3>
                    <p class="text-green-800 mb-4">为了让自动备份功能生效，您需要设置一个 Cron Job，让它每天定期运行您的脚本来检查是否到了备份时间。</p>
                    <p class="text-green-800 mb-4">在终端中打开 Cron 表编辑器：</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="crontab -e">复制</button>
                        <p>crontab -e</p>
                    </div>
                    <p class="text-green-800 mt-4 mb-4">如果之前有设置过旧的备份 Cron 任务，请务必将其删除。在文件底部添加以下一行新的 Cron Job 条目：</p>
                    <div class="code-block bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm">
                        <button class="copy-button" data-clipboard-text="0 0 * * * bash /root/personal_backup.sh check_auto_backup > /dev/null 2>&1">复制</button>
                        <p>0 0 * * * bash /root/personal_backup.sh check_auto_backup > /dev/null 2>&1</p>
                    </div>
                    <p class="text-green-800 mt-4">**重要**：请务必将 `/root/personal_backup.sh` 替换为您脚本的**实际完整路径**。这行 Cron Job 的含义是：每天的午夜 00:00，执行您的备份脚本并带上 `check_auto_backup` 参数。脚本会根据您设定的间隔智能判断是否需要执行备份。保存并退出 Cron 表 (`Ctrl + X`, `Y`, `Enter`)。</p>
                </div>
            </div>
        </section>

        <section id="usage" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-900 mb-3">使用方法</h2>
                <p class="text-lg text-green-700">安装完成后，您可以在终端中输入 `bf` 来启动脚本。了解脚本菜单中每一个选项的功能和用法。</p>
            </div>
            <div class="max-w-4xl mx-auto space-y-4">
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">主菜单导航</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p class="mb-4">脚本启动后，您将看到一个清晰的主菜单（在终端中将带有颜色和边框效果）：</p>
                        <pre class="bg-green-900 text-green-100 rounded-lg p-4 font-mono text-sm whitespace-pre-wrap"><code>================ 个人自用数据备份 ================
==================== 功能选项 ====================
1.自动备份设定 (当前间隔: X 天)
2.手动备份
3.自定义备份路径 (当前路径: 未设置/已设置路径)
4.压缩包格式 (当前支持: ZIP)
5.云存储设定 (支持: S3/R2, WebDAV)
6.消息通知设定 (Telegram)
7.设置备份保留策略 (云端)
==================================================
0.退出脚本
99.卸载脚本
请输入选项:</code></pre>
                        <p class="mt-4">您可以通过输入对应的数字选项来执行功能。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">1. 自动备份设定</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p>选择此选项以设置自动备份的间隔天数。脚本会将此设置保存到 `~/.personal_backup_config` 文件中。</p>
                        <p class="mt-2"><strong>工作原理</strong>：配合之前设置的每天运行的 Cron Job，脚本会在每次被 Cron 触发时检查距离上次自动备份的时间。如果达到了您在此处设定的天数间隔，脚本就会执行备份；否则，它将跳过备份并记录一条日志。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">2. 手动备份</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p>选择此选项会立即触发一次备份操作。脚本将按照您设定的备份路径进行压缩，并上传到已配置的云存储服务。过程和结果会实时显示在终端，并记录到日志文件 (`~/.personal_backup_log.txt`)，同时通过 Telegram 发送通知。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">3. 自定义备份路径</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p>选择此选项可以设置您希望备份的源文件或文件夹的绝对路径。例如：`/home/user/my_documents` 或 `/etc/nginx/nginx.conf`。设置的路径会保存到配置文件中。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">4. 压缩包格式</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p>此选项仅显示当前支持的压缩格式（目前为 `ZIP`）。如果需要支持其他格式（如 `.tar.gz`），您需要手动修改脚本中的 `perform_backup` 函数来更改压缩命令。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">5. 云存储设定</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800 space-y-2">
                        <p>进入此子菜单来配置您的云存储服务：</p>
                        <p class="font-semibold mt-2">1. 配置 S3/R2 存储:</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>输入您的 S3/R2 Access Key ID, Secret Access Key, Endpoint URL 和 Bucket 名称。</li>
                            <li><strong>Cloudflare R2 Endpoint 示例</strong>：通常格式为 `https://&lt;ACCOUNT_ID&gt;.r2.cloudflarestorage.com`，请将 `&lt;ACCOUNT_ID&gt;` 替换为您真实的 Cloudflare 账户 ID。</li>
                            <li><strong>安全性提示</strong>：出于安全考虑，这些敏感凭证<strong>不会</strong>被保存到脚本配置文件中。每次脚本启动时，您需要重新输入它们，或者更推荐的方式是使用 `awscli` 的标准配置机制（`aws configure`）或环境变量来管理。</li>
                        </ul>
                        <p class="font-semibold mt-2">2. 配置 WebDAV 存储:</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>输入您的 WebDAV 服务器 URL, 用户名和密码。密码输入时会隐藏。</li>
                            <li><strong>安全性提示</strong>：WebDAV 凭证同样<strong>不会</strong>被保存到配置文件中，每次脚本启动需要重新输入。</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">6. 消息通知设定 (Telegram)</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800 space-y-2">
                        <p>选择此选项以配置 Telegram 机器人的 Token 和 Chat ID。</p>
                        <p><strong>重要提示</strong>：Telegram Bot Token 和 Chat ID 同样<strong>不会</strong>被保存到配置文件中，每次脚本启动需要重新输入。</p>
                        <p class="font-semibold mt-2">获取 Bot Token:</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>通过 Telegram 搜索 `@BotFather`，并按照提示创建一个新的机器人，它会提供给您 Bot Token。</li>
                        </ul>
                        <p class="font-semibold mt-2">获取 Chat ID:</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li>向您的机器人发送一条消息，然后访问 `https://api.telegram.org/bot&lt;YOUR_BOT_TOKEN&gt;/getUpdates`（将 `&lt;YOUR_BOT_TOKEN&gt;` 替换为您的 Bot Token）。在返回的 JSON 中查找 `chat` 对象里的 `id` 字段，这就是您的 Chat ID（通常以 `-` 开头）。</li>
                        </ul>
                    </div>
                </div>
                 <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">7. 设置备份保留策略 (云端)</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800 space-y-2">
                        <p>选择此选项以配置云端备份文件的保留策略，帮助您管理存储空间并自动清理旧的备份。</p>
                        <p class="font-semibold mt-2">您可以选择以下两种策略之一：</p>
                        <ul class="list-disc list-inside ml-4 space-y-1">
                            <li><strong>按数量保留</strong>：只保留最新的 N 个备份文件。例如，设置为 5，则在每次新备份完成后，如果总数超过 5 个，最旧的备份将被删除。</li>
                            <li><strong>按天数保留</strong>：只保留最近 N 天内的备份文件。例如，设置为 30，则任何创建时间超过 30 天的备份文件都将被删除。</li>
                        </ul>
                        <p class="mt-2">您也可以选择**关闭保留策略**，这意味着所有上传到云端的备份都将一直保留，直到您手动删除。此设置会保存到 `~/.personal_backup_config` 文件中。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">0. 退出脚本</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p>安全退出脚本。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">99. 卸载脚本</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p>此选项会提示您是否确认卸载脚本。如果确认，脚本将删除自身文件、配置文件 (`~/.personal_backup_config`) 和日志文件 (`~/.personal_backup_log.txt`)。</p>
                        <p class="mt-2">**注意**：如果您通过别名 (`alias bf=...`) 或将脚本移动到 `PATH` 目录来启动它，您需要手动删除这些别名或文件。</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="faq" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-900 mb-3">常见问题与故障排除</h2>
                <p class="text-lg text-green-700">遇到问题了？在这里查找解决方案。</p>
            </div>
                <div class="max-w-4xl mx-auto space-y-4">
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">问题：运行脚本时提示 “/root/personal_backup.sh: line X: command not found” 或 “syntax error”</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p><strong>原因:</strong> 这通常是由于在复制粘贴脚本代码时，引入了不可见的特殊字符（如不间断空格 `\u00A0`），或者文件编码/换行符格式问题（例如在 Windows 系统下编辑后上传到 Linux）。Bash 无法识别这些隐藏字符。</p>
                        <p class="mt-2"><strong>解决方案:</strong></p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li><strong>重新复制粘贴</strong>：最彻底的方法是再次从 GitHub 仓库中复制 `personal_backup.sh` 的内容。</li>
                            <li><strong>使用 `nano` 编辑器</strong>：在 Linux 终端中，用 `nano ~/personal_backup.sh` 打开文件。</li>
                            <li><strong>清空内容</strong>：在 `nano` 中按住 `Ctrl + K` 连续删除所有旧代码。</li>
                            <li><strong>粘贴新代码</strong>：使用 `Ctrl + Shift + V` (Linux) 或 `Cmd + V` (macOS) 粘贴最新、干净的代码。</li>
                            <li><strong>清除换行符 (可选)</strong>：保存并退出后，可以尝试运行 `dos2unix ~/personal_backup.sh` 命令（如果系统没有，先安装 `sudo apt install dos2unix`）。</li>
                            <li><strong>避免跨系统编辑</strong>：尽量避免在 Windows 系统上编辑此脚本，直接在 Linux 终端中操作。</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">问题：提示 “检测到以下依赖项缺失：zip awscli 或 s3cmd (用于S3/R2)”</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p><strong>原因:</strong> 您的系统缺少运行备份功能（如压缩、上传到云存储）所需的工具。</p>
                        <p class="mt-2"><strong>解决方案:</strong> 按照脚本提示，根据您的操作系统类型，在终端中运行相应的安装命令。</p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li><strong>Debian/Ubuntu</strong>：`sudo apt update && sudo apt install zip awscli curl`</li>
                            <li><strong>CentOS/RHEL</strong>：`sudo yum install zip awscli curl` (或 `sudo dnf install zip awscli curl`)</li>
                        </ul>
                        <p class="mt-2">确保所有必要的工具都被安装后，再次运行脚本。</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">问题：S3/R2 上传失败，提示“配置、凭证和网络连接”问题</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p><strong>原因:</strong></p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li>S3/R2 Access Key ID 或 Secret Access Key 输入错误。</li>
                            <li>S3/R2 Endpoint URL 不正确（尤其对于 Cloudflare R2，确保 `&lt;ACCOUNT_ID&gt;` 部分正确）。</li>
                            <li>S3/R2 Bucket 名称不正确。</li>
                            <li>网络连接问题，无法访问 S3/R2 服务。</li>
                            <li>AWS CLI 未正确配置或凭证已过期。</li>
                        </ul>
                            <p class="mt-2"><strong>解决方案:</strong></p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li>仔细检查您在“云存储设定”中输入的各项信息，确保它们与您的云服务提供商提供的信息完全一致。</li>
                            <li>如果您使用 `awscli`，考虑通过 `aws configure` 命令配置持久性凭证，这样更稳定和安全。对于 R2，确保 `~/.aws/config` 中的 `endpoint_url` 配置正确。</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">问题：WebDAV 上传失败</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p><strong>原因:</strong></p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li>WebDAV URL 不正确，或路径不正确（例如，缺少末尾的 `/`）。</li>
                            <li>WebDAV 用户名或密码错误。</li>
                            <li>WebDAV 服务器未启动或无法访问。</li>
                            <li>服务器防火墙阻止了对外访问。</li>
                        </ul>
                        <p class="mt-2"><strong>解决方案:</strong></p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li>检查 WebDAV URL 的格式和可访问性。</li>
                            <li>验证用户名和密码是否正确。</li>
                            <li>确保您的 WebDAV 服务器正常运行，并且从您的备份服务器可以访问到它。</li>
                        </ul>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg border border-green-200/50 overflow-hidden">
                    <button class="accordion-button w-full text-left p-6 flex justify-between items-center hover:bg-green-50/50 transition-colors" aria-expanded="false">
                        <span class="text-lg font-semibold text-green-900">问题：Telegram 消息通知无法发送</span>
                        <span class="text-2xl text-green-500 transform transition-transform duration-500">&#x2795;</span>
                    </button>
                    <div class="accordion-content px-6 text-green-800">
                        <p><strong>原因:</strong></p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li>Telegram Bot Token 或 Chat ID 不正确。</li>
                            <li>网络连接问题，无法访问 Telegram API。</li>
                            <li>Bot 被停止或权限不足。</li>
                        </ul>
                        <p class="mt-2"><strong>解决方案:</strong></p>
                        <ul class="list-disc list-inside mt-1 space-y-1">
                            <li>仔细核对您在“消息通知设定”中输入的 Bot Token 和 Chat ID。</li>
                            <li>确保您的服务器可以访问 `api.telegram.org`。</li>
                            <li>在 Telegram 中检查您的机器人是否正常运行，并确保它有向您发送消息的权限。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="text-center py-8 mt-12 border-t border-green-200">
        <p class="text-green-700">由个人自用数据备份脚本提供支持 | <a href="https://github.com/your-github-repo" id="github-link" class="text-green-600 hover:text-green-800 font-semibold" target="_blank" rel="noopener noreferrer">查看 GitHub 仓库</a></p>
    </footer>

    <script defer>
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');

            // Navigation handler
            function setActiveSection(hash) {
                const targetHash = hash || '#home';
                
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.hash === targetHash);
                });

                sections.forEach(section => {
                    section.classList.toggle('active', '#' + section.id === targetHash);
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetHash = this.hash;
                    window.history.pushState(null, null, targetHash);
                    setActiveSection(targetHash);
                    window.scrollTo(0, 0);
                });
            });
            
            // Set initial section based on URL hash
            setActiveSection(window.location.hash);


            // Accordion handler
            document.querySelectorAll('.accordion-button').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('span:last-child');

                    const isOpen = button.classList.toggle('open');
                    button.setAttribute('aria-expanded', isOpen); // Accessibility

                    if (isOpen) {
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.style.transform = 'rotate(45deg)';
                    } else {
                        content.style.maxHeight = '0';
                        icon.style.transform = 'rotate(0deg)';
                    }
                });
            });

            // Copy to clipboard handler
            document.querySelectorAll('.copy-button').forEach(button => {
                button.addEventListener('click', async () => {
                    const textToCopy = button.dataset.clipboardText;
                    
                    try {
                        await navigator.clipboard.writeText(textToCopy);
                        button.textContent = '已复制!';
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.textContent = '复制';
                            button.classList.remove('copied');
                        }, 2000);
                    } catch (err) {
                        // Fallback for older browsers or insecure contexts
                        console.error('无法使用 Clipboard API 复制，尝试旧方法:', err);
                        const textArea = document.createElement('textarea');
                        textArea.value = textToCopy;
                        textArea.style.position = 'fixed'; // Avoid scrolling to bottom
                        textArea.style.left = '-9999px';
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand('copy');
                            button.textContent = '已复制!';
                            button.classList.add('copied');
                            setTimeout(() => {
                                button.textContent = '复制';
                                button.classList.remove('copied');
                            }, 2000);
                        } catch (err) {
                            console.error('Fallback: 复制失败', err);
                        } finally {
                            document.body.removeChild(textArea);
                        }
                    }
                });
            });
            
            // GitHub link update
            // 请将此处替换为您的实际 GitHub 仓库地址！
            const githubLink = document.getElementById('github-link');
            const realGithubUrl = 'https://github.com/wk4796/123'; // <-- **重要：请替换为您的真实GitHub仓库链接**
            
            if (githubLink) {
                githubLink.href = realGithubUrl;
                // 移除之前的 alert 提示
                githubLink.removeEventListener('click', function(e) {
                    e.preventDefault();
                    alert('请将此处的链接替换为您真实的 GitHub 仓库地址！');
                });
            }
        });
    </script>
</body>
</html>
